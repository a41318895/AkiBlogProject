webpackJsonp([5],{P7ry:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("mvHQ"),n=r.n(s),i=r("vMJZ"),o=r("TIfe"),a={data:function(){return{username:"",email:"",password:"",nusername:"",nemail:"",nnickName:"",npassword:"",npassword2:"",phoneNumber:"",login:0,loginErr:!1,loginTitle:"用戶名稱或密碼錯誤",nusernameErr:!1,nemailErr:!1,npasswordErr:!1,npassword2Err:!1,registerErr:!1,registerTitle:"該電子郵件已經被註冊過了",step:1,fullscreenLoading:!1,urlstate:0,phoneNumberErr:!1}},methods:{setLogin:function(e){this.login=e,localStorage.setItem("logUrl",this.$route.fullPath),this.$router.push({path:"/Login",query:{login:e}})},routeChange:function(){this.login=void 0==this.$route.query.login?1:parseInt(this.$route.query.login),this.urlstate=void 0==this.$route.query.urlstate?0:this.$route.query.urlstate},gotoHome:function(){var e=this;Object(i.f)(this.username,this.password).then(function(t){Object(o.c)(t.token),localStorage.setItem("userInfo",n()(t.userInfo)),localStorage.getItem("logUrl")?e.$router.push({path:localStorage.getItem("logUrl")}):e.$router.push({path:"/"})}).catch(function(t){e.loginErr=!0,e.loginTitle="使用者名稱或密碼錯誤"})},newRegister:function(){var e=this;if(this.nusernameErr=!this.nusername,this.nemailErr=!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(this.nemail),this.npasswordErr=!(this.npassword&&/^(\w){6,12}$/.test(this.npassword)),this.npassword2Err=this.npassword!==this.npassword2,this.phoneNumberErr=!/^09\d{8}$/.test(this.phoneNumber),!(this.nusernameErr||this.nemailErr||this.npasswordErr||this.npassword2Err||this.phoneNumberErr)){this.fullscreenLoading=!0;var t={userName:this.nusername,nickName:this.nnickName,phoneNumber:this.phoneNumber,email:this.nemail,password:this.npassword};Object(i.g)(t).then(function(t){e.goLogin()}).catch(function(t){e.registerErr=!0,e.registerTitle="註冊失敗，請重新嘗試",e.fullscreenLoading=!1})}},goLogin:function(){this.$router.push({path:"/Login?login=1"})},goRegister:function(){this.$router.push({path:"/Login?login=0"})}},watch:{$route:"routeChange"},created:function(){this.routeChange()}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"container"},[r("h1",{staticClass:"loginTitle"}),e._v(" "),r("div",[1===e.login?r("div",{staticClass:"loginBox"},[e._m(0),e._v(" "),r("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.loginErr,expression:"loginErr"}],attrs:{title:e.loginTitle,type:"error","show-icon":"",closable:!1}}),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.gotoHome(t)}}},[r("el-input",{attrs:{type:"text",placeholder:"用戶名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),r("el-input",{attrs:{type:"password",placeholder:"密碼"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.gotoHome(t):null}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),e._m(1),e._v(" "),r("div",{staticClass:"lr-btn tcolors-bg",on:{click:e.gotoHome}},[e._v("登入")])],1),e._v(" "),e._m(2)],1):r("div",{staticClass:"registerBox"},[e._m(3),e._v(" "),r("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.registerErr,expression:"registerErr"}],attrs:{title:e.registerTitle,type:"error","show-icon":"",closable:!1}}),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.newRegister(t)}}},[r("el-input",{attrs:{type:"text",placeholder:"用戶名稱"},model:{value:e.nusername,callback:function(t){e.nusername=t},expression:"nusername"}}),e._v(" "),r("el-input",{attrs:{type:"text",placeholder:"暱稱"},model:{value:e.nnickName,callback:function(t){e.nnickName=t},expression:"nnickName"}}),e._v(" "),r("el-input",{class:{"input-error":e.phoneNumberErr},attrs:{type:"text",placeholder:"手機號碼"},model:{value:e.phoneNumber,callback:function(t){e.phoneNumber=t},expression:"phoneNumber"}}),e._v(" "),r("el-input",{attrs:{type:"email",placeholder:"電子郵件"},model:{value:e.nemail,callback:function(t){e.nemail=t},expression:"nemail"}}),e._v(" "),r("el-input",{attrs:{type:"password",placeholder:"密碼: 6-12位英文、数字、底線"},model:{value:e.npassword,callback:function(t){e.npassword=t},expression:"npassword"}}),e._v(" "),r("el-input",{attrs:{type:"password",placeholder:"確認密碼"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.newRegister(t):null}},model:{value:e.npassword2,callback:function(t){e.npassword2=t},expression:"npassword2"}}),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"lr-btn tcolors-bg",attrs:{"element-loading-text":"提交資料中..."},on:{click:e.newRegister}},[e._v("\n            註冊\n          ")])],1),e._v(" "),e._m(4)],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lr-title"},[t("h1",[this._v("登入")]),this._v(" "),t("p",[this._v("\n            新用戶"),t("a",{staticClass:"tcolors",attrs:{href:"#/Login?login=0"}},[this._v("註冊")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",[t("a",{attrs:{href:"#/ForgotPassword"}},[this._v("忘記密碼？")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"backHome"},[t("a",{staticClass:"tcolors",attrs:{href:"#/"}},[this._v("返回首頁")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lr-title"},[t("h1",[this._v("註冊")]),this._v(" "),t("p",[this._v("\n            已有帳號 ?"),t("a",{staticClass:"tcolors",attrs:{href:"#/Login?login=1"}},[this._v("登入")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"backHome"},[t("a",{staticClass:"tcolors",attrs:{href:"#/"}},[this._v("返回首頁")])])}]};var u=r("VU/8")(a,l,!1,function(e){r("pJPs")},null,null);t.default=u.exports},mvHQ:function(e,t,r){e.exports={default:r("qkKv"),__esModule:!0}},pJPs:function(e,t){},qkKv:function(e,t,r){var s=r("FeBl"),n=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}}});